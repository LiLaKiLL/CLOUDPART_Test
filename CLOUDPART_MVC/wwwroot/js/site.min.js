$(function () { $(document).on("click", "#updproduct", function () { $(".modal-title").html("Update product"); var t = $(this).parent().parent().find("td"); $("#txtid").val(t.eq(1).text()), $("#txtname").val(t.eq(2).text()), $("#txtdescription").val(t.eq(3).text()), $(".confirm-btn").attr("data", "update") }), $(document).on("click", "#addproduct", function () { $(".modal-title").html("Add product"), $("#txtid, #txtname, #txtdescription").val(""), $(".confirm-btn").attr("data", "create") }), $(document).on("click", "#delproduct", function () { if (confirm("Want to delete?")) { var t = $(this).parent().parent(); $.ajax({ type: "GET", url: "/delete/" + t.find("td:eq(1)").text(), success: function (e) { 204 == e.result_status ? (alertify.success("Product deleted!"), t.remove()) : alertify.error("Problem") } }) } }), $(".confirm-btn").click(function () { var t = { id: $("#txtid").val(), name: $("#txtname").val(), description: $("#txtdescription").val() }; switch ($(this).attr("data")) { case "create": case "update": $.ajax({ type: "POST", url: "/" + ("create" === $(this).attr("data") ? "create" : "update"), data: JSON.stringify(t), contentType: "application/json;charset=utf-8", dataType: "json", success: function (t) { 201 == t.result_status || 204 == t.result_status ? alertify.success("Product " + ("create" === $(this).attr("data") ? "created" : "updated") + "!") : alertify.error("Problem") } }) } }), $("#filterbtn").click(function () { $.ajax({ type: "POST", url: "/get/" + $("#txtFilter").val(), success: function (t) { var e, a; e = t, $("#myTable tbody").empty(), a = 1, e.length ? $.each(e, function (t, e) { $("#myTable tbody").append("<tr><td>" + a + "</td><td>" + e.id + "</td><td>" + e.name + "</td><td>" + e.description + '</td><td><button type="button" class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#exampleModal" id="updproduct">Update</button> <button type="button" class="btn btn-danger" id="delproduct">Delete</button></td></tr>'), a++ }) : $("#myTable tbody").append('<tr><td colspan="5">Empty table!</td><tr>') } }) }) });